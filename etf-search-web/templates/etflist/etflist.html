{% extends 'base/base.html' %}
{% block header %}
<html lang="en" class="h-100">

</html>

<head>
    <!-- Bootstrap core CSS -->
    <style>
        .bd-placeholder-img {
            font-size: 1.125rem;
            text-anchor: middle;
            -webkit-user-select: none;
            -moz-user-select: none;
            user-select: none;
        }

        @media (min-width: 768px) {
            .bd-placeholder-img-lg {
                font-size: 3.5rem;
            }
        }

        @media (max-width: 768px) {
            #etflistsdiv {
                font-size: xx-small;
            }
        }

        @media (max-width: 768px) {
            h5 {
                font-size: 1rem;
            }
        }
    </style>
    <!-- Custom styles for this template -->
    <link href="{{ url_for('static', filename='etflist.css') }}" rel="stylesheet">

</head>
{% endblock %}
{% block content %}

<body class="d-flex h-100 text-center">

    <div class="cover-container overflow-auto d-flex w-100 h-100 px-auto mx-auto flex-column">
        <header class="mb-5">
            {% include 'index/menubar.html' %}
        </header>
        <main class="px-0  h-100">
            <script type="text/javascript" charset="utf8" src="https://code.jquery.com/jquery-3.5.1.js"></script>
            <div class="container h-50">
                <div class="row h-50 align-items-center">
                    <h5>전체 ETF 목록입니다.</h5>
                </div>
                <script type="text/javascript" src="/static/search.js"></script>
                <div id=etflistsdiv>
                    <link rel="stylesheet" type="text/css"
                        href="https://cdn.datatables.net/1.10.24/css/jquery.dataTables.css">
                    <script type="text/javascript" charset="utf8"
                        src="https://cdn.datatables.net/1.10.24/js/jquery.dataTables.js">
                    </script>
                    <script type="text/javascript" charset="utf8" src="https://code.jquery.com/jquery-3.5.1.js">
                    </script>
                    <script type="text/javascript" charset="utf8"
                        src="https://cdn.datatables.net/1.10.24/js/jquery.dataTables.min.js">
                    </script>
                    <script>
                        $(document).ready(function () {
                            $('#etflist').DataTable({
                                "scrollX": true
                            });
                        });
                    </script>
                    <table id="etflist" class="display compact" style="width:100%">
                        <thead>
                            <tr>
                                {% if is_mobile == True %}
                                <th>ETF</th>
                                <th>3M(%)</th>
                                <th>12M(%)</th>
                                <th>타입</th>
                                {% else %}
                                <th>ETF</th>
                                <th>1개월 수익률(%)</th>
                                <th>3개월 수익률(%)</th>
                                <th>6개월 수익률(%)</th>
                                <th>12개월 수익률(%)</th>
                                <th>ETF 타입</th>
                                {% endif %}
                            </tr>
                        </thead>
                        <tbody>
                            {% for etf in etflist %}
                            <tr>
                                <td>
                                    <a {% if is_mobile == True %} class="d-inline-block text-truncate"
                                        style="max-width: 7rem;" {% endif %}
                                        href="https://finance.daum.net/quotes/A{{etf['_id']}}#home">{{etf['_source']['etfName']}}</a>
                                </td>
                                <!--1M profit-->
                                {% if is_mobile == False %}
                                {% if etf['_source']['etfProfits']['etfProfit1M'] == None %}
                                <td style="color:gray">-</td>
                                {% elif etf['_source']['etfProfits']['etfProfit1M']|float < 0 %}
                                <td style="color:blue">{{etf['_source']['etfProfits']['etfProfit1M']}}</td>
                                {% else %}
                                <td style="color:red">{{etf['_source']['etfProfits']['etfProfit1M']}}</td>
                                {% endif %}
                                {% endif %}
                                <!--3M profit-->
                                {% if etf['_source']['etfProfits']['etfProfit3M'] == None %}
                                <td style="color:gray">-</td>
                                {% elif etf['_source']['etfProfits']['etfProfit3M']|float < 0 %}
                                <td style="color:blue">{{etf['_source']['etfProfits']['etfProfit3M']}}</td>
                                {% else %}
                                <td style="color:red">{{etf['_source']['etfProfits']['etfProfit3M']}}</td>
                                {% endif %}
                                {% if is_mobile == False %}
                                <!--6M profit-->
                                {% if etf['_source']['etfProfits']['etfProfit6M'] == None %}
                                <td style="color:gray">-</td>
                                {% elif etf['_source']['etfProfits']['etfProfit6M']|float < 0 %}
                                <td style="color:blue">{{etf['_source']['etfProfits']['etfProfit6M']}}</td>
                                {% else %}
                                <td style="color:red">{{etf['_source']['etfProfits']['etfProfit6M']}}</td>
                                {% endif %}
                                {% endif %}
                                <!--12M profit-->
                                {% if etf['_source']['etfProfits']['etfProfit12M'] == None %}
                                <td style="color:gray">-</td>
                                {% elif etf['_source']['etfProfits']['etfProfit12M']|float < 0 %}
                                <td style="color:blue">{{etf['_source']['etfProfits']['etfProfit12M']}}</td>
                                {% else %}
                                <td style="color:red">{{etf['_source']['etfProfits']['etfProfit12M']}}</td>
                                {% endif %}
                                <!--ETF Type-->
                                <td style="font-size: xx-small;">
                                    {% for type in etf['_source']['etfTypes'] %}
                                        {{ type['etfType'] }}<br>
                                    {% endfor %}
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </main>
        <footer class="mt-auto text-white-50">

        </footer>
    </div>
</body>
{% endblock %}


</html>